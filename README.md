# 🤖 TG-SELL-BOT

Telegram бот для управления подписками и продажи доступа к панели Remnawave.<br>
Проект создан на основе популярного бота **Remnashop** с улучшениями и адаптацией под платформу Remnawave.

___

## $${\color{blue}🎯\ Основные\ возможности}$$

<details>
<summary>Показать подробности</summary>

- 🛍️ Управление тарифными планами и подписками
- 💳 Интеграция с платежными системами (Yookassa, Cryptomus, Helekat, Telegram Stars и др.)
- 📊 Полная система аналитики и статистики
- 🎟️ Система промокодов и реферралов
- 👥 Управление пользователями и доступом
- 📢 Рассылки и уведомления
- ⚙️ Простое управление через встроенный админ-интерфейс

</details>

___

## $${\color{blue}📋\ Требования}$$

<details>
<summary>Показать подробности</summary>

### 🖥️ Система
- Ubuntu **20.04 / 22.04 / 24.04** или другой Linux
- Доступ **root** или возможность использовать `sudo`

### 📦 Зависимости
- **Docker** (версия 20.10+)
- **Docker Compose** (версия 2.0+)
- **curl** и **wget**
- **remnawave** (версия 2.4+)

<sub>⚠️ Все пакеты устанавливаются при автоматической установке. При ручной установке необходимо проверить наличие.</sub>

### 🔐 Telegram
- Токен бота от **[@BotFather](https://t.me/BotFather)**
- Ваш Telegram ID (получить у **[@userinfobot](https://t.me/userinfobot)**)
- Username для поддержки (ваш аккаунт или группа)

<sub>⚠️ Обязательно используйте защищённые токены и ключи.</sub>

### 🔗 API
- Токен Remnawave (Remnawave → Настройки Remnawave → API Токены)
- Домен для публичного доступа к боту

</details>

___

## $${\color{blue}🚀\ Скрипт\ автоматической\ установки}$$

<details>
<summary>Показать подробности</summary>

### ▶️ Полная установка в один шаг
```bash
cd /tmp && git clone -b main --depth 1 https://github.com/dfcdfuaran-ops/tg-bot.git tg-sell-bot > /dev/null 2>&1 && cd tg-sell-bot && ./install.sh; cd /opt && rm -rf /tmp/tg-sell-bot
```

### 📦 Что делает скрипт установки
- ✅ Установит Docker и Docker Compose (если необходимо)
- ✅ Клонирует репозиторий в `/opt/tg-sell-bot`
- ✅ Создаст файл конфигурации `.env` с защищёнными ключами
- ✅ Запросит обязательные параметры
- ✅ Соберёт Docker образ
- ✅ Запустит все сервисы
- ✅ Автоматически определит и настроит реверс-прокси (Caddy/Nginx) если установлен

<sub>⏱️ Среднее время установки: 1-2 минуты.</sub>

</details>

___

## $${\color{blue}⚙️\ Параметры\ установки}$$

<details>
<summary>Показать подробности</summary>

| Параметр | Описание | Где получить |
|----------|---------|--------------|
| **APP_DOMAIN** | Домен для доступа к боту | Ваш домен (напр: `bot.example.com`) |
| **BOT_TOKEN** | Токен Telegram бота | [@BotFather](https://t.me/BotFather) |
| **BOT_DEV_ID** | Ваш Telegram ID | [@userinfobot](https://t.me/userinfobot) |
| **BOT_SUPPORT_USERNAME** | Username поддержки | Ваш username без `@` |
| **REMNAWAVE_TOKEN** | API токен Remnawave | Панель Remnawave → Settings → API |

<sub>⚠️ Все остальные параметры генерируются автоматически!</sub>

</details>

___

## $${\color{blue}🛠\ Управление\ ботом}$$

<details>
<summary>Показать подробности</summary>

### 🌍 Глобальная команда
Управляйте ботом из любой директории:
```bash
tg-sell-bot
```

### 📋 Интерактивное меню

Скрипт объединяет функции установки и управления в единый интерактивный интерфейс с клавишами навигации (↑↓ Enter).

#### Когда бот НЕ установлен
```
════════════════════════════════════════
        🚀 TG-SELL-BOT INSTALLER
════════════════════════════════════════

❌ Статус: Не установлен

Доступное действие:
1) Установить
0) Выход
```

#### Когда бот установлен
```
════════════════════════════════════════
    🚀 TG-SELL-BOT MANAGEMENT PANEL
════════════════════════════════════════

  🔄  Обновить
  ℹ️  Просмотр логов
  📊  Логи в реальном времени
----------------------------------
  🔃  Перезагрузить бота
  🔃  Перезагрузить с логами
  ⬆️  Включить бота
  ⬇️  Выключить бота
----------------------------------
  🔄  Переустановить
  ⚙️  Изменить настройки
  🧹  Очистить данные
  🗑️  Удалить бота
----------------------------------
  ❌  Выход

════════════════════════════════════════
Используйте ↑↓ для навигации, Enter для выбора
```

### Функции менеджера
1. **🔄 Переустановить** - переустановить бот с потерей данных (требует подтверждения)
2. **📦 Проверить обновления** - загрузить последние изменения с GitHub и перезапустить
3. **⚙️ Изменить настройки** - изменить домен, токены, ID администратора
4. **🧹 Очистить данные** - удалить пользователей и кеш базы данных
5. **🗑️ Удалить бота** - полностью удалить бота (требует двойного подтверждения)

</details>

___

## $${\color{blue}📖\ Администрирование}$$

<details>
<summary>Показать подробности</summary>

### Доступ к админ-панели
Админ-панель доступна в личных сообщениях боту для пользователя с ID `BOT_DEV_ID`.

### Возможности админки
- ⚙️ Управление тарифами и планами
- 💳 Настройка платежных систем
- 👥 Управление пользователями и доступом
- 📊 Статистика и аналитика
- 📢 Рассылки и уведомления
- 🎟️ Система промокодов
- 🔗 Интеграция с Remnawave

</details>

___

## $${\color{red}🗑️\ Удаление\ бота}$$

<details>
<summary>Показать подробности</summary>

```bash
# Переходим в папку проекта
cd /opt/tg-sell-bot

# Останавливаем и удаляем контейнеры
docker compose down -v

# Удаляем Docker образ
docker rmi tg-sell-bot-remnashop:latest -f 2>/dev/null || true

# Удаляем папку проекта
cd /opt && rm -rf tg-sell-bot
```

<sub>⚠️ Эта операция необратима! Сделайте бэкап перед удалением.</sub>

</details>

___

## $${\color{red}🔧\ Частые\ ошибки}$$

<details>
<summary>Показать подробности</summary>

### ❌ Бот не отвечает
**Решение:**
```bash
# Проверьте логи
docker compose logs remnashop

# Перезагрузите бот
docker compose restart

# Убедитесь что BOT_TOKEN правильный
nano .env
```

### ❌ Ошибка подключения к Remnawave
**Решение:**
```bash
# Проверьте токен API
nano .env

# Убедитесь что домен правильный и доступен
curl https://your-remnawave-domain.com/api/health
```

### ❌ Ошибка при установке Docker
**Решение:**
```bash
# Обновите систему
sudo apt update && sudo apt upgrade -y

# Переустановите Docker
curl -fsSL https://get.docker.com -o get-docker.sh && sudo sh get-docker.sh
```

</details>

___

## ❤️ Благодарности

Бот разработан с упором на простоту, стабильность и автоматизацию процессов.

Спасибо всем, кто помогает тестировать, улучшать и поддерживать проект!

___

## 📄 Лицензия

[MIT License](LICENSE)

## 🔗 Ссылки

- **GitHub**: [dfcdfuaran-ops/tg-bot](https://github.com/dfcdfuaran-ops/tg-bot)
- **Issues**: [Сообщить об ошибке](https://github.com/dfcdfuaran-ops/tg-bot/issues)
- **Remnawave**: [https://remnawave.com](https://remnawave.com)

