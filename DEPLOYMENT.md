# üì¶ Production vs Development Setup

–ü—Ä–æ–µ–∫—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ —Ä–µ–∂–∏–º–∞: **—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞** (development) –∏ **production –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ**.

## üéØ –û—Å–Ω–æ–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ

### Development —Ä–µ–∂–∏–º
- –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ (`./src`) **–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Å—Ä–∞–∑—É (–≥–æ—Ä—è—á–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `docker-compose.yml`
- –°–±–æ—Ä–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ª–æ–∫–∞–ª—å–Ω–æ

### Production —Ä–µ–∂–∏–º
- –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è **–≤–Ω—É—Ç—Ä–∏ Docker –æ–±—Ä–∞–∑–∞**
- –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø–∞–ø–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ: `.env`, `docker-compose.production.yml`, `assets/`, `logs/`, `backups/`
- –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –∏—Å–∫–ª—é—á–µ–Ω—ã (—ç–∫–æ–Ω–æ–º–∏—Ç –º–µ—Å—Ç–æ, –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≥–æ—Ç–æ–≤—ã–π –æ–±—Ä–∞–∑ –∏–∑ GitHub Container Registry

## üì• –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–ª–æ–∫–∞–ª—å–Ω–æ)

```bash
git clone https://github.com/DFTeams/remna-tg-bot.git
cd remna-tg-bot
./install.sh
```

–≠—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç –ø—Ä–æ–µ–∫—Ç –≤ **development —Ä–µ–∂–∏–º–µ** —Å –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º `./src`.

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
git clone https://github.com/DFTeams/remna-tg-bot.git
cd remna-tg-bot
./install.sh --prod
```

–ò–ª–∏ –∫–æ—Ä–æ—Ç–∫–æ:
```bash
./install.sh -p
```

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ production —Ä–µ–∂–∏–º–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –±—É–¥–µ—Ç —Ç–æ–ª—å–∫–æ:

```
remnashop/
‚îú‚îÄ‚îÄ .env                              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è)
‚îú‚îÄ‚îÄ docker-compose.production.yml    # Production –∫–æ–Ω—Ñ–∏–≥ (–ù–ï –º–æ–Ω—Ç–∏—Ä—É–µ—Ç src)
‚îú‚îÄ‚îÄ assets/                          # –ê—Å—Å–µ—Ç—ã –±–æ—Ç–∞
‚îú‚îÄ‚îÄ logs/                            # –õ–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
‚îî‚îÄ‚îÄ backups/                         # –ë—ç–∫–∞–ø—ã –ë–î
```

**–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –ù–ï –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä** - –æ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ Docker –æ–±—Ä–∞–∑–µ!

## üîç –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### .dockerignore

–≠—Ç–æ—Ç —Ñ–∞–π–ª –∏—Å–∫–ª—é—á–∞–µ—Ç –∏–∑ Docker –æ–±—Ä–∞–∑–∞:
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é (*.md —Ñ–∞–π–ª—ã)
- Git —Ñ–∞–π–ª—ã (.git, .github)
- IDE —Ñ–∞–π–ª—ã (.vscode, .idea)  
- –ö–æ–Ω—Ñ–∏–≥–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (Makefile, pyproject.toml, uv.lock, install.sh)

–ü–æ—ç—Ç–æ–º—É –æ–±—Ä–∞–∑ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ–Ω—É–∂–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤.

### docker-compose.yml (development)

```yaml
remnashop:
  build:
    context: .
    dockerfile: Dockerfile
  volumes:
    - ./src:/opt/remnashop/src        # ‚Üê –ú–æ–Ω—Ç–∏—Ä—É–µ—Ç –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
    - ./scripts:/opt/remnashop/scripts # ‚Üê –ú–æ–Ω—Ç–∏—Ä—É–µ—Ç —Å–∫—Ä–∏–ø—Ç—ã
    - ./logs:/opt/remnashop/logs
    - ./assets:/opt/remnashop/assets
```

### docker-compose.production.yml (server)

```yaml
remnashop:
  image: ghcr.io/dfteams/remna-tg-bot:latest  # ‚Üê –ì–æ—Ç–æ–≤—ã–π –æ–±—Ä–∞–∑
  volumes:
    # –ù–ï–¢ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è ./src –∏ ./scripts
    - ./logs:/opt/remnashop/logs
    - ./assets:/opt/remnashop/assets
    - ./backups:/opt/remnashop/backups
```

## üöÄ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:

```bash
docker-compose -f docker-compose.production.yml pull
docker-compose -f docker-compose.production.yml up -d
```

–í—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ —Ç–æ–º–∞—Ö (`assets`, `logs`, `backups`) **—Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è**.

## ‚öôÔ∏è Dockerfile

Dockerfile **–∫–æ–ø–∏—Ä—É–µ—Ç src –≤ –æ–±—Ä–∞–∑** –ø—Ä–∏ —Å–±–æ—Ä–∫–µ:

```dockerfile
COPY ./src ./src
COPY ./scripts/docker-entrypoint.sh ./scripts/docker-entrypoint.sh
```

–ü–æ—ç—Ç–æ–º—É –∫–æ–¥ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –æ–±—Ä–∞–∑–∞ –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, –¥–∞–∂–µ –µ—Å–ª–∏ –ø–∞–ø–∫–∏ –Ω–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

## üîß –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –æ–±—Ä–∞–∑–∞

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –æ–±—Ä–∞–∑ –≤–º–µ—Å—Ç–æ GitHub Container Registry:

1. –°–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑ –ª–æ–∫–∞–ª—å–Ω–æ:
   ```bash
   docker build -t my-remna-bot:latest .
   ```

2. –ò–∑–º–µ–Ω–∏—Ç–µ –≤ `docker-compose.production.yml`:
   ```yaml
   image: my-remna-bot:latest
   ```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ:
   ```bash
   docker-compose -f docker-compose.production.yml up -d
   ```

## üíæ –†–∞–∑–º–µ—Ä—ã

| –ü–∞–ø–∫–∞ | Development | Production |
|-------|------------|-----------|
| –ü—Ä–æ–µ–∫—Ç | ~500+ MB (—Å src, docs, etc.) | ~5-10 MB (—Ç–æ–ª—å–∫–æ .env, docker-compose.yml) |
| Docker –æ–±—Ä–∞–∑ | ~200-300 MB | ~200-300 MB (—Å–æ–¥–µ—Ä–∂–∏—Ç src) |

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

Production —Ä–µ–∂–∏–º –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ:
- –ú–µ–Ω—å—à–µ —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ = –º–µ–Ω—å—à–µ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å –¥–ª—è –∞—Ç–∞–∫
- –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –≤ –æ–±—Ä–∞–∑–µ (–Ω–µ –≤ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–∞–ø–∫–∞—Ö)
- –§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## üìù –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### Development —Ä–µ–∂–∏–º

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
docker compose -f docker-compose.yml logs -f remnashop

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker compose -f docker-compose.yml restart

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É
docker compose -f docker-compose.yml exec remnashop bash

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker compose -f docker-compose.yml down
```

### Production —Ä–µ–∂–∏–º

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
docker compose -f docker-compose.production.yml logs -f remnashop

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–∑–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker compose -f docker-compose.production.yml pull
docker compose -f docker-compose.production.yml up -d

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker compose -f docker-compose.production.yml down
```

## ‚ùì –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã

**Q: –ü–æ—á–µ–º—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ω–µ—Ç –ø–∞–ø–∫–∏ `src`?**  
A: –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ Docker –æ–±—Ä–∞–∑–∞, –∞ –Ω–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. –≠—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ –∏ —ç–∫–æ–Ω–æ–º–∏—Ç –º–µ—Å—Ç–æ.

**Q: –ú–æ–∂–Ω–æ –ª–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ?**  
A: –ù–µ—Ç, –∫–æ–¥ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –æ–±—Ä–∞–∑–µ. –î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑ –∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –µ–≥–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

**Q: –ö–∞–∫ –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ?**  
A: –°–æ–±–µ—Ä–∏—Ç–µ –Ω–æ–≤—ã–π –æ–±—Ä–∞–∑ (–ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ –≤ CI/CD), –∑–∞–≥—Ä—É–∑–∏—Ç–µ –µ–≥–æ –≤ —Ä–µ–µ—Å—Ç—Ä, –∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `docker pull`.

**Q: –ß—Ç–æ –µ—Å–ª–∏ –Ω—É–∂–Ω—ã —Ä–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö?**  
A: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ–≥–∏ –æ–±—Ä–∞–∑–æ–≤: `ghcr.io/dfteams/remna-tg-bot:v1.0`, `ghcr.io/dfteams/remna-tg-bot:v1.1`, –∏ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Ç–µ–≥ –≤ `docker-compose.production.yml`.
